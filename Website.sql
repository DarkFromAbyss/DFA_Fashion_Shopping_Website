CREATE TABLE IF NOT EXISTS "Customers" (
	"id_customer" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"phone" VARCHAR(255) NOT NULL,
	"email" VARCHAR(255) NOT NULL,
	"address" TEXT NOT NULL,
	"join_date" TIMESTAMP,
	PRIMARY KEY("id_customer")
);




CREATE TABLE IF NOT EXISTS "Employees" (
	"id_employee" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR(255) NOT NULL,
	"phone" INTEGER NOT NULL,
	"email" VARCHAR(255) NOT NULL,
	"position" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id_employee")
);




CREATE TABLE IF NOT EXISTS "Categories" (
	"id_category" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" TEXT NOT NULL,
	"description" TEXT NOT NULL,
	PRIMARY KEY("id_category")
);




CREATE TABLE IF NOT EXISTS "Products" (
	"id_product" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"name" TEXT NOT NULL,
	"price" DOUBLE PRECISION NOT NULL,
	"id_category" INTEGER NOT NULL,
	"size" CHAR(1) NOT NULL,
	"color" VARCHAR(255) NOT NULL,
	"material" VARCHAR(255) NOT NULL,
	"stock_quality" INTEGER NOT NULL,
	"description" TEXT NOT NULL,
	PRIMARY KEY("id_product")
);




CREATE TABLE IF NOT EXISTS "Carts" (
	"id_cart" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_customer" INTEGER NOT NULL,
	"create_date" TIMESTAMP NOT NULL,
	PRIMARY KEY("id_cart")
);




CREATE TABLE IF NOT EXISTS "CartDetails" (
	"id_cart_detail" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_cart" INTEGER NOT NULL,
	"id_product" INTEGER NOT NULL,
	"quantity" INTEGER NOT NULL,
	PRIMARY KEY("id_cart_detail")
);




CREATE TABLE IF NOT EXISTS "Orders" (
	"id_order" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_customer" INTEGER NOT NULL,
	"id_employee" INTEGER,
	"id_shipper" INTEGER NOT NULL,
	"order_date" TIMESTAMP NOT NULL,
	"id_order_detail" INTEGER NOT NULL,
	"invoice" INTEGER NOT NULL,
	"id_payment" INTEGER NOT NULL,
	"id_discount" INTEGER NOT NULL,
	"total_amount" DOUBLE PRECISION NOT NULL,
	"status" VARCHAR(255) NOT NULL,
	PRIMARY KEY("id_order")
);




CREATE TABLE IF NOT EXISTS "OrderDetails" (
	"id_order_detail" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_product" INTEGER NOT NULL,
	"quantity" INTEGER NOT NULL,
	"price" DOUBLE PRECISION NOT NULL,
	"total_amount" DOUBLE PRECISION NOT NULL,
	"tax_amount" DOUBLE PRECISION NOT NULL,
	PRIMARY KEY("id_order_detail")
);




CREATE TABLE IF NOT EXISTS "Payments" (
	"id_payment" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_order" INTEGER NOT NULL,
	"method" VARCHAR(255) NOT NULL,
	"amount" DOUBLE PRECISION NOT NULL,
	"date_payment" TIMESTAMP NOT NULL,
	"tax_amount" DOUBLE PRECISION NOT NULL,
	PRIMARY KEY("id_payment")
);




CREATE TABLE IF NOT EXISTS "Discounts" (
	"id_discount" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"code" VARCHAR(255) NOT NULL,
	"percentage" DOUBLE PRECISION NOT NULL,
	"date" TIMESTAMP NOT NULL,
	PRIMARY KEY("id_discount")
);




CREATE TABLE IF NOT EXISTS "Shipper" (
	"id_shipper" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"company" VARCHAR(255),
	"phone" INTEGER,
	PRIMARY KEY("id_shipper")
);




CREATE TABLE IF NOT EXISTS "Feedbacks" (
	"id_feedback" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"id_customer" INTEGER,
	"id_product" INTEGER,
	"rating" DOUBLE PRECISION,
	"comment" TEXT,
	PRIMARY KEY("id_feedback")
);



ALTER TABLE "Customers"
ADD FOREIGN KEY("id_customer") REFERENCES "Carts"("id_customer")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Carts"
ADD FOREIGN KEY("id_cart") REFERENCES "CartDetails"("id_cart")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Products"
ADD FOREIGN KEY("id_product") REFERENCES "CartDetails"("id_product")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Categories"
ADD FOREIGN KEY("id_category") REFERENCES "Products"("id_category")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Products"
ADD FOREIGN KEY("id_product") REFERENCES "OrderDetails"("id_product")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "OrderDetails"
ADD FOREIGN KEY("id_order_detail") REFERENCES "Orders"("id_order_detail")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Customers"
ADD FOREIGN KEY("id_customer") REFERENCES "Orders"("id_customer")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Employees"
ADD FOREIGN KEY("id_employee") REFERENCES "Orders"("id_employee")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Shipper"
ADD FOREIGN KEY("id_shipper") REFERENCES "Orders"("id_shipper")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Payments"
ADD FOREIGN KEY("id_payment") REFERENCES "Orders"("id_payment")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Discounts"
ADD FOREIGN KEY("id_discount") REFERENCES "Orders"("id_discount")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Customers"
ADD FOREIGN KEY("id_customer") REFERENCES "Feedbacks"("id_customer")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "Products"
ADD FOREIGN KEY("id_product") REFERENCES "Feedbacks"("id_product")
ON UPDATE NO ACTION ON DELETE NO ACTION;